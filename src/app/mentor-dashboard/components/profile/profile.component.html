<div class="container">
  <div class="toggle-buttons">
    <button class="toggle-btn" [class.active]="showProfileSection" (click)="showProfileSection = true">
      <i class="fas fa-user-circle"></i> Mentor Profile
    </button>
    <button class="toggle-btn" [class.active]="!showProfileSection" (click)="toggleSection()">
      <i class="fas fa-key"></i> Change Password
    </button>
  </div>

  <div class="profile-container" *ngIf="showProfileSection">
    <h2>Personal Information</h2>
    <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
      <div class="form-group">
        <label>Mentor ID:</label>
        <input type="text" formControlName="mentorId" class="input-field disabled-input">
      </div>
      <div class="form-group">
        <label>Name:</label>
        <input type="text" formControlName="name" class="input-field"
          [class.is-invalid]="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
        <div *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched" class="error-message">
          <span>Name is required.</span>
        </div>
      </div>
      <div class="form-group">
        <label>Email:</label>
        <input type="email" formControlName="email" class="input-field"
          [class.is-invalid]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
        <div *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="error-message">
          <span *ngIf="profileForm.get('email')?.hasError('required')">Email is required.</span>
          <span *ngIf="profileForm.get('email')?.hasError('email')">Please enter a valid email.</span>
        </div>
      </div>
      <div class="form-group">
        <label>Contact:</label>
        <input type="text" formControlName="contact" class="input-field"
          [class.is-invalid]="profileForm.get('contact')?.invalid && profileForm.get('contact')?.touched">
        <div *ngIf="profileForm.get('contact')?.invalid && profileForm.get('contact')?.touched" class="error-message">
          <span *ngIf="profileForm.get('contact')?.hasError('required')">Contact is required.</span>
          <span *ngIf="profileForm.get('contact')?.hasError('pattern')">Please enter a valid 10-digit number.</span>
        </div>
      </div>
      <div class="form-group">
        <label>Gender:</label>
        <select formControlName="gender" class="input-field"
          [class.is-invalid]="profileForm.get('gender')?.invalid && profileForm.get('gender')?.touched">
          <option value="" disabled selected>Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        <div *ngIf="profileForm.get('gender')?.invalid && profileForm.get('gender')?.touched" class="error-message">
          <span>Gender is required.</span>
        </div>
      </div>
      <div class="form-group">
        <label>Batch:</label>
        <input type="text" formControlName="batchName" class="input-field disabled-input">
      </div>
      <div class="form-group">
        <label>Department:</label>
        <input type="text" formControlName="department" class="input-field disabled-input">
      </div>
      <div class="form-group">
        <label>Specialization:</label>
        <input type="text" formControlName="specialization" class="input-field disabled-input">
      </div>
      
      <div class="form-actions">
        <button type="button" class="cancel-btn" (click)="toggleEdit()">{{ isEditing ? 'Cancel' : 'Edit' }}</button>
        <button type="submit" class="save-btn" [disabled]="!isEditing">Save</button>
      </div>
    </form>
  </div>

  <div class="user-container" *ngIf="!showProfileSection">
    <h2>Change Password</h2>
    <form [formGroup]="userForm" (ngSubmit)="changePassword()">
      <div class="form-group">
        <label>Username:</label>
        <input type="text" formControlName="username" class="input-field disabled-input">
      </div>
      <div class="form-group">
        <label>Current Password:</label>
        <input type="password" formControlName="password" class="input-field"
          [class.is-invalid]="userForm.get('password')?.invalid && userForm.get('password')?.touched">
        <div *ngIf="userForm.get('password')?.invalid && userForm.get('password')?.touched" class="error-message">
          <span *ngIf="userForm.get('password')?.hasError('required')">Current Password is required.</span>
          <span *ngIf="userForm.get('password')?.hasError('minlength')">Password must be at least 10 characters.</span>
        </div>
      </div>
      <div class="form-group">
        <label>New Password:</label>
        <input type="password" formControlName="newPassword" class="input-field"
          [class.is-invalid]="userForm.get('newPassword')?.invalid && userForm.get('newPassword')?.touched">
        <div *ngIf="userForm.get('newPassword')?.invalid && userForm.get('newPassword')?.touched" class="error-message">
          <span *ngIf="userForm.get('newPassword')?.hasError('required')">New Password is required.</span>
          <span *ngIf="userForm.get('newPassword')?.hasError('minlength')">New Password must be at least 10 characters.</span>
        </div>
      </div>
      <button type="submit" class="submit-btn" [disabled]="userForm.invalid">
        <i class="fas fa-key"></i> Change Password
      </button>
    </form>
  </div>
</div>