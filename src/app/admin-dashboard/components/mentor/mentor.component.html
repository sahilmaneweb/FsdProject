<div class="mentor-page-card">
  <header class="mentor-header">
    <h1>Mentor Management</h1>
    <button class="add-btn" (click)="openForm()">
      <i class="fas fa-plus-circle"></i> Add Mentor
    </button>
  </header>

  <div class="table-scroll-container">
    <div class="mentor-grid-container" *ngIf="mentors.length > 0; else noMentors">
      <div class="grid-header">
        <div class="grid-item">Mentor ID</div>
        <div class="grid-item">Name</div>
        <div class="grid-item">Email</div>
        <div class="grid-item">Contact</div>
        <div class="grid-item">Batch</div>
        <div class="grid-item">Department</div>
        <div class="grid-item text-center">Actions</div>
      </div>

      <div class="mentor-grid-row fade-in-row" *ngFor="let mentor of mentors; let i = index" [style.animation-delay]="(i * 0.05) + 's'">
        <div class="grid-item" data-label="Mentor ID">{{ mentor.mentorId }}</div>
        <div class="grid-item" data-label="Name">{{ mentor.name }}</div>
        <div class="grid-item" data-label="Email">{{ mentor.email }}</div>
        <div class="grid-item" data-label="Contact">{{ mentor.contact }}</div>
        <div class="grid-item" data-label="Batch">{{ mentor.batch?.batchName }}</div>
        <div class="grid-item" data-label="Department">{{ mentor.department }}</div>
        <div class="grid-item text-center" data-label="Actions">
          <button class="edit-btn" (click)="onEdit(mentor)">
            <i class="fas fa-edit"></i>
          </button>
          <button class="delete-btn" (click)="onDelete(mentor.mentorId)">
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
      </div>
    </div>

    <ng-template #noMentors>
      <div class="no-mentors-found">
        <i class="fas fa-chalkboard-teacher sad-icon"></i>
        <h2>No Mentors Found</h2>
        <p>It looks like there are no mentors registered yet. Click the button above to add your first mentor!</p>
      </div>
    </ng-template>
  </div>
</div>

<section class="form-container" [class.visible]="isFormVisible">
  <div class="form-modal" [class.fade-in]="isFormVisible" [class.fade-out]="!isFormVisible">
    <div class="form-header">
      <h2>{{ editingMentor ? 'Edit Mentor' : 'Add Mentor' }}</h2>
      <button class="close-btn" (click)="closeForm()">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <form [formGroup]="mentorForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="name">Name</label>
        <input type="text" id="name" formControlName="name" class="input-field" placeholder="Enter Name"
          [class.is-invalid]="mentorForm.get('name')?.invalid && mentorForm.get('name')?.touched" />
        <div *ngIf="mentorForm.get('name')?.invalid && mentorForm.get('name')?.touched" class="error-message">
          <span *ngIf="mentorForm.get('name')?.hasError('required')">Name is required.</span>
          <span *ngIf="mentorForm.get('name')?.hasError('minlength')">Name must be at least 3 characters.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" formControlName="email" class="input-field" placeholder="Enter Email"
          [class.is-invalid]="mentorForm.get('email')?.invalid && mentorForm.get('email')?.touched" />
        <div *ngIf="mentorForm.get('email')?.invalid && mentorForm.get('email')?.touched" class="error-message">
          <span *ngIf="mentorForm.get('email')?.hasError('required')">Email is required.</span>
          <span *ngIf="mentorForm.get('email')?.hasError('email')">Please enter a valid email address.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="contact">Contact</label>
        <input type="tel" id="contact" formControlName="contact" class="input-field" placeholder="Enter Contact No."
          [class.is-invalid]="mentorForm.get('contact')?.invalid && mentorForm.get('contact')?.touched" />
        <div *ngIf="mentorForm.get('contact')?.invalid && mentorForm.get('contact')?.touched" class="error-message">
          <span *ngIf="mentorForm.get('contact')?.hasError('required')">Contact is required.</span>
          <span *ngIf="mentorForm.get('contact')?.hasError('pattern')">Please enter a valid 10-digit phone number.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="gender">Gender</label>
        <select id="gender" formControlName="gender" class="input-field"
          [class.is-invalid]="mentorForm.get('gender')?.invalid && mentorForm.get('gender')?.touched">
          <option value="" disabled selected>Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
        </select>
        <div *ngIf="mentorForm.get('gender')?.invalid && mentorForm.get('gender')?.touched" class="error-message">
          <span>Gender is required.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="batchName">Batch</label>
        <select id="batchName" formControlName="batchName" class="input-field"
          [class.is-invalid]="mentorForm.get('batchName')?.invalid && mentorForm.get('batchName')?.touched">
          <option value="" disabled selected>Select Batch</option>
          @for (item of batch; track $index) {
          <option [value]="item.batchName">
            {{ item.batchName }} - {{ item.venue }}
          </option>
          }
        </select>
        <div *ngIf="mentorForm.get('batchName')?.invalid && mentorForm.get('batchName')?.touched" class="error-message">
          <span>Batch is required.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="department">Department</label>
        <input type="text" id="department" formControlName="department" class="input-field" placeholder="Enter Department"
          [class.is-invalid]="mentorForm.get('department')?.invalid && mentorForm.get('department')?.touched" />
        <div *ngIf="mentorForm.get('department')?.invalid && mentorForm.get('department')?.touched" class="error-message">
          <span>Department is required.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="specialization">Specialization</label>
        <input type="text" id="specialization" formControlName="specialization" class="input-field" placeholder="Enter Specialization"
          [class.is-invalid]="mentorForm.get('specialization')?.invalid && mentorForm.get('specialization')?.touched" />
        <div *ngIf="mentorForm.get('specialization')?.invalid && mentorForm.get('specialization')?.touched" class="error-message">
          <span>Specialization is required.</span>
        </div>
      </div>

      <div class="form-group submit-group">
        <button type="submit" class="submit-btn" [disabled]="mentorForm.invalid">
          {{ editingMentor ? 'Update Mentor' : 'Add Mentor' }}
        </button>
      </div>
    </form>
  </div>
</section>